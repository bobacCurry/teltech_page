(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-155d0fdf"],{"150f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"service-add"},[n("div",{staticClass:"zone-frame"},[n("h2",[t._v("新增拉人服务")]),n("div",{staticClass:"add-user flex-start-center"},[n("div",{staticClass:"info-item"},[n("Input",{attrs:{placeholder:"群名称（将人拉入该群）"},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}})],1),t._v("\n\t\t\t \n\t\t\t"),n("div",{staticClass:"info-item"},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择TG账号"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}},t._l(t.clientList,(function(e,a){return n("Option",{key:a,attrs:{value:e.phone}},[t._v(t._s(e.phone))])})),1)],1),t._v("\n\t\t\t \n\t\t\t"),n("div",{staticClass:"info-item"},[n("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:function(e){return t.add()}}},[t._v("创建拉人服务")])],1)])]),n("div",{staticClass:"zone-frame"},[n("h2",[t._v("拉人服务列表")]),n("div",{staticClass:"add-user flex-start-center"},t._l(t.addList,(function(e,a){return n("Card",{key:a,staticClass:"add-item"},[n("div",[n("div",{staticClass:"add-item-title"},[t._v("拉人的目标群 :  "+t._s(e.target))]),n("div",{staticClass:"add-item-button"},[n("Button",{attrs:{type:e.status?"info":"primary"},on:{click:function(n){return t.AddRun(e._id,e.status?0:1,a)}}},[t._v(t._s(e.status?"停止服务":"开启服务"))]),t._v("\n\t\t\t\t\t\t   \n\t\t\t            "),n("Button",{attrs:{type:"warning",disabled:t.loading},on:{click:function(e){return t.DelChatUser(a)}}},[t._v("删除服务")])],1)]),n("Collapse",{model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[n("Panel",{attrs:{name:a+"-1"}},[t._v("\n\t\t\t        \t拉人的目标群\n\t\t\t           \t"),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.target))])]),n("Panel",{attrs:{name:a+"-2"}},[t._v("\n\t\t\t            拉人的telegram号\n\t\t\t            "),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"flex-start-center"},[n("Select",{staticStyle:{width:"50%"},attrs:{placeholder:"选择TG账号"},model:{value:t.addPhone,callback:function(e){t.addPhone=e},expression:"addPhone"}},t._l(t.clientList,(function(a,r){return-1===e.phone.indexOf(a.phone)?n("Option",{key:r,attrs:{value:a.phone}},[t._v(t._s(a.phone))]):t._e()})),1),t._v("\n\t\t\t\t\t\t\t     \n\t\t\t\t\t\t\t    "),n("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:function(n){return t.addPhonePost(t.addPhone,e._id)}}},[t._v("添加拉人号")])],1),n("div",{staticStyle:{"margin-top":"10px"}},t._l(e.phone,(function(r,s){return n("Tag",{attrs:{color:"primary",closable:""},on:{"on-close":function(n){return t.delPhone(e._id,r,a)}}},[t._v(t._s(r))])})),1)])]),n("Panel",{attrs:{name:a+"-3"}},[t._v("\n\t\t\t            从下列群拉人\n\t\t\t            "),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"flex-start-center"},[n("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"群名称（从该群中拉人）"},model:{value:t.addChat,callback:function(e){t.addChat=e},expression:"addChat"}}),t._v("\n\t\t\t            \t\t \n\t\t\t            \t\t"),n("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:function(n){return t.AddChatUser(t.addChat,e._id)}}},[t._v("添加群")])],1),n("div",{staticStyle:{"margin-top":"10px"}},t._l(e.chatids,(function(e,a){return n("Tag",{attrs:{color:"primary"}},[t._v(t._s(e))])})),1)])]),n("Panel",{attrs:{name:a+"-4"}},[t._v("\n\t\t\t            需要拉的用户数量\n\t\t\t            "),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.uids)+" 个")])]),n("Panel",{attrs:{name:a+"-5"}},[t._v("\n\t\t\t            拉入成功的数量\n\t\t\t            "),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.success)+" 个")])]),n("Panel",{attrs:{name:a+"-6"}},[t._v("\n\t\t\t            拉入失败的数量\n\t\t\t            "),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.fail)+" 个")])]),n("Panel",{attrs:{name:a+"-7"}},[t._v("\n\t\t\t            拉人状态\n\t\t\t            "),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.status?"已拉完！":"正在拉。。。"))])])],1)],1)})),1)])])},r=[],s=(n("a481"),n("acd9")),o=n("66df"),i=function(t,e){return o["a"].request({url:"group/add_member/new_chat_user/".concat(t,"/").concat(e),method:"post"})},c=function(){return o["a"].request({url:"group/add_member/get_chat_user",method:"get"})},d=function(t,e){return o["a"].request({url:"group/add_member/add_chat_phone/".concat(t,"/").concat(e),method:"post"})},u=function(t,e){return o["a"].request({url:"group/add_member/add_chat_user/".concat(t,"/").concat(e),method:"post"})},l=function(t,e){return o["a"].request({url:"group/add_member/add_run/".concat(t,"/").concat(e),method:"post"})},h=function(t){return o["a"].request({url:"group/add_member/del_chat_user/".concat(t),method:"post"})},f=function(t,e){return o["a"].request({url:"group/add_member/del_chat_phone/".concat(t,"/").concat(e),method:"post"})},p={data:function(){return{clientList:[],phone:"",target:"",panel:"",addList:[],addPhone:"",addChat:"",loading:!1}},mounted:function(){this.getChatUser(),this.getUserClient()},methods:{add:function(){var t=this;return this.target.trim()?this.phone?(this.target=this.target.replace("https://t.me/",""),this.target=this.target.replace("@",""),this.loading=!0,void i(this.phone,this.target).then((function(e){var n=e.data;n.success?t.$Notice.success({title:n.msg}):t.$Notice.error({title:n.msg}),t.phone="",t.target="",t.loading=!1,t.getChatUser()}))):this.$Notice.error({title:"请选择一个tg账号"}):this.$Notice.error({title:"目标群群名称不得为空"})},getChatUser:function(){var t=this;c().then((function(e){var n=e.data;t.addList=n.msg}))},getUserClient:function(){var t=this;Object(s["e"])().then((function(e){var n=e.data;t.clientList=n.msg}))},addPhonePost:function(t,e){var n=this;return t?e?(this.loading=!0,void d(t,e).then((function(t){var e=t.data;e.success?(n.$Notice.success({title:e.msg}),n.addPhone="",n.getChatUser()):n.$Notice.error({title:e.msg}),n.loading=!1}))):this.$Notice.error({title:"服务不得为空"}):this.$Notice.error({title:"电话号不得为空"})},AddChatUser:function(t,e){var n=this;return t=t.replace("https://t.me/",""),t=t.replace("@",""),t?e?(this.loading=!0,void u(t,e).then((function(t){var e=t.data;e.success?(n.$Notice.success({title:e.msg}),n.addChat="",n.getChatUser()):n.$Notice.error({title:e.msg}),n.loading=!1}))):this.$Notice.error({title:"服务不得为空"}):this.$Notice.error({title:"群名称不得为空"})},AddRun:function(t,e,n){var a=this;l(t,e).then((function(t){var r=t.data;if(!r.success)return a.$Notice.error({title:r.msg});a.addList[n].status=e,a.$Notice.success({title:"设置成功"})}))},delPhone:function(t,e,n){var a=this;f(t,e).then((function(t){var r=t.data;return r.success?(a.addList[n].phone=a.addList[n].phone.filter((function(t){return e!==t})),a.$Notice.success({title:"删除成功"})):a.$Notice.error({title:"删除失败"})}))},DelChatUser:function(t){var e=this;this.$Modal.confirm({title:"删除该服务",content:"确认删除该服务",onOk:function(){h(e.addList[t]._id).then((function(n){var a=n.data;return a.success?(e.addList=e.addList.filter((function(e,n){return t!==n})),e.$Notice.success({title:"删除成功"})):e.$Notice.error({title:"删除失败"})}))}})}}},v=p,_=(n("ff8e"),n("2877")),m=Object(_["a"])(v,a,r,!1,null,"37500c10",null);e["default"]=m.exports},"6e48":function(t,e,n){},acd9:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return d}));var a=n("66df"),r=function(){return a["a"].request({url:"service/client/get_user_client",method:"get"})},s=function(t){return a["a"].request({url:"service/auth/send_code/".concat(t),method:"post"})},o=function(t,e){return a["a"].request({url:"service/auth/confirm_code/".concat(t,"/").concat(e),method:"post"})},i=function(t,e,n){return a["a"].request({url:"service/chat/add_chat/".concat(t,"/").concat(e,"/").concat(n),method:"post"})},c=function(t,e){return a["a"].request({url:"service/chat/get_user_chat/".concat(t,"/").concat(e),method:"get"})},d=function(t){return a["a"].request({url:"/service/chat/get_chat/".concat(t),method:"get"})}},ff8e:function(t,e,n){"use strict";var a=n("6e48"),r=n.n(a);r.a}}]);