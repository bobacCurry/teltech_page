(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57eff878"],{"058f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"hr-client"}},[n("ul",{staticClass:"flex-start-center"},[t._l(t.clientList,(function(e,i){return n("li",{key:i,staticClass:"client-item-frame"},[n("Card",{staticClass:"client-item"},[n("div",{staticClass:"item-info"},[t._v("实例信息")]),n("div",{staticClass:"item-info"},[t._v("TG账号："),n("b",[t._v(t._s(e.phone))])]),n("div",{staticClass:"item-info"},[t._v("TG用户名：\n            "),e.info?n("span",[t._v(t._s(e.info.first_name))]):t._e()]),n("div",{staticClass:"item-info"},[t._v("实例状态：\n            "),n("span",{style:{color:2==e.status||3==e.status||4==e.status?"red":""}},[t._v(t._s(t.clientStatus[e.status]))]),2==e.status||4==e.status?n("a",{on:{click:function(n){return t.restore(e.phone)}}},[t._v("已恢复")]):t._e()]),n("div",{staticClass:"item-info"},[t._v("是否使用："),e.used?n("span",{staticStyle:{color:"red"}},[t._v("已使用")]):n("span",[t._v("未使用")])]),n("div",{staticClass:"item-info"},[t._v("删除账号："),n("a",{on:{click:function(n){return t.delClient(e.phone)}}},[t._v("确认删除")])])])],1)})),n("li",{staticClass:"client-item-frame"},[n("Card",{staticClass:"client-item"},[t.newClient.binding?n("div",[n("div",{staticClass:"bind-item"},[n("Input",{attrs:{placeholder:"TG账号（带国家区号）"},model:{value:t.newClient.phone,callback:function(e){t.$set(t.newClient,"phone",e)},expression:"newClient.phone"}},[t.newClient.timer?n("Button",{staticStyle:{width:"100px"},attrs:{slot:"append",disabled:t.newClient.timer>0},slot:"append"},[t._v("已发送 "+t._s(t.newClient.timer)+"s")]):n("Button",{staticStyle:{width:"100px"},attrs:{slot:"append",disabled:t.loading},on:{click:t.sendCode},slot:"append"},[t._v("发送验证码")])],1)],1),n("div",{staticClass:"bind-item"},[n("Input",{attrs:{placeholder:"输入验证码"},model:{value:t.newClient.code,callback:function(e){t.$set(t.newClient,"code",e)},expression:"newClient.code"}},[n("Button",{staticStyle:{width:"100px"},attrs:{slot:"append",disabled:t.loading},on:{click:t.confirmCode},slot:"append"},[t._v("确认验证码")])],1)],1),n("div",{staticClass:"bind-item"},[n("Button",{staticClass:"cancel-bind",attrs:{type:"error"},on:{click:t.cancelConfirm}},[t._v("取消绑定")])],1)]):n("Button",{attrs:{type:"primary"},on:{click:function(e){t.newClient.binding=!0}}},[t._v("绑定已注册的TG账号")])],1)],1)],2)])},c=[],o=n("b39f"),s=n("acd9"),r=n("9328"),a={data:function(){return{clientList:[],clientStatus:r["c"],newClient:{binding:!1,phone:"",code:"",type:null,timer:0},countdown:null,loading:!1}},mounted:function(){this.getClient()},methods:{getClient:function(){var t=this;Object(s["d"])().then((function(e){e.data.success&&(t.clientList=e.data.msg)}))},sendCode:function(){var t=this;if(!this.newClient.phone.trim())return this.$Notice.error({title:"请输入telegram账号"});Object(s["e"])(this.newClient.phone).then((function(e){return e.data.success?(t.newClient.phone="",t.newClient.code="",t.newClient.binding=!1,t.getClient(),t.$Notice.success({title:"绑定成功"})):t.$Notice.error({title:e.data.msg})})).catch((function(e){return t.$Notice.error({title:e.response.data.msg})})).finally((function(){t.stopCount(),t.loading=!1})),this.startCount()},confirmCode:function(){return this.newClient.phone.trim()?this.newClient.timer?this.newClient.code?(this.loading=!0,void Object(s["b"])(this.newClient.phone,this.newClient.code).then((function(t){console.log(t.data)}))):this.$Notice.error({title:"请输入验证码"}):this.$Notice.error({title:"请先发送验证码"}):this.$Notice.error({title:"请输入telegram账号"})},cancelConfirm:function(){this.newClient.phone.trim()&&this.newClient.timer&&Object(s["b"])(this.newClient.phone,"1111").then((function(t){console.log(t.data)})),this.newClient.binding=!1,this.newClient.phone="",this.newClient.code="",this.newClient.type=null,this.stopCount()},startCount:function(){var t=this;this.newClient.timer=120,this.countdown=setInterval((function(){t.newClient.timer--,0===t.newClient.timer&&clearInterval(t.countdown)}),1e3)},stopCount:function(){this.newClient.timer=0,clearInterval(this.countdown)},restore:function(t){var e=this;if(this.loading)return!1;this.loading=!0,Object(o["e"])(t).then((function(t){t.data;e.getClient()})).finally((function(){e.loading=!1}))},delClient:function(t){var e=this;this.$Modal.confirm({title:"是否删除该账号？",content:"是否删除该账号？",onOk:function(){Object(o["a"])(t).then((function(t){var n=t.data;return n.success?(e.getClient(),e.$Notice.success({title:n.msg})):e.$Notice.error({title:"解除错误",desc:n.msg})}))}})},getlClient:function(t){var e=this;if(this.loading)return!1;this.loading=!0,Object(o["d"])(t).then((function(t){t.data;e.getClient()})).finally((function(){e.$Notice.info({title:"更新完毕"}),e.loading=!1}))}}},l=a,u=(n("9b02"),n("2877")),d=Object(u["a"])(l,i,c,!1,null,"5e6898b5",null);e["default"]=d.exports},"8f87":function(t,e,n){},9328:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return a}));var i=["群发服务","私信服务","拉群服务"],c=["未开启","正常","被禁言（spam）","被封禁（banned）","验证失效"],o=["工作信息","商业推广","美食外卖","其他业务"],s=["文字","图片"],r=["未通过","通过"],a=[1,2,3,4]},"9b02":function(t,e,n){"use strict";var i=n("8f87"),c=n.n(i);c.a},acd9:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return a}));var i=n("66df"),c=function(){return i["a"].request({url:"service/client/get_user_client",method:"get"})},o=function(t){return i["a"].request({url:"service/auth/send_code/".concat(t),method:"post"})},s=function(t,e){return i["a"].request({url:"service/auth/confirm_code/".concat(t,"/").concat(e),method:"post"})},r=function(t,e,n){return i["a"].request({url:"service/chat/add_chat",data:{chatname:t,type:e,auth:n},method:"post"})},a=function(t){return i["a"].request({url:"/service/chat/get_chat/".concat(t),method:"get"})}},b39f:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return a}));var i=n("66df"),c=function(t,e){return i["a"].request({url:"/service/client/get_notused_client",method:"get"})},o=function(t){return i["a"].request({url:"/service/client/del_user_client/".concat(t),method:"post"})},s=function(t){return i["a"].request({url:"/service/client/restore/".concat(t),method:"post"})},r=function(t){return i["a"].request({url:"/service/client/get_add_chat/".concat(t),method:"get"})},a=function(t){return i["a"].request({url:"/service/client/get_client/".concat(t),method:"get"})}}}]);